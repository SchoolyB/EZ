import @std
import @maps
using std

do main() {
    println("=== Map Data Type Tests ===")
    println("")

    // Test 1: Map literal creation
    println("Test 1: Map literal creation")
    temp users map[string:int] = {"alice": 25, "bob": 30, "charlie": 35}
    println("  Created map with 3 entries")

    // Test 2: Map access
    println("Test 2: Map access")
    temp age int = users["alice"]
    println("  Alice's age:", age)

    // Test 3: Map assignment (adding new key)
    println("Test 3: Map assignment (adding new key)")
    users["dave"] = 40
    println("  Added dave with age 40")

    // Test 4: Map update (existing key)
    println("Test 4: Map update (existing key)")
    users["alice"] = 26
    temp newAge int = users["alice"]
    println("  Updated Alice's age to:", newAge)

    // Test 5: maps.get() with missing key returns nil or default
    println("Test 5: maps.get() for missing key")
    temp missing = maps.get(users, "unknown")
    temp missingWithDefault int = maps.get(users, "unknown", -1)
    println("  Unknown user (nil):", missing)
    println("  Unknown user (default -1):", missingWithDefault)

    // Test 6: Empty map declaration (without initializer)
    println("Test 6: Empty map declaration")
    temp emptyMap map[string:string]
    println("  Created empty map")

    // Test 7: Integer keys
    println("Test 7: Integer keys")
    temp scores map[int:string] = {1: "first", 2: "second", 3: "third"}
    println("  Position 1:", scores[1])
    println("  Position 2:", scores[2])

    // Test 8: Print map directly
    println("Test 8: Print map")
    println("  Users map:", users)
    println("  Scores map:", scores)

    // Test 9: maps.len()
    println("Test 9: maps.len()")
    temp userCount int = maps.len(users)
    println("  User count:", userCount)

    // Test 10: maps.has()
    println("Test 10: maps.has()")
    temp hasAlice bool = maps.has(users, "alice")
    temp hasUnknown bool = maps.has(users, "unknown")
    println("  Has alice:", hasAlice)
    println("  Has unknown:", hasUnknown)

    // Test 11: maps.get() retrieves existing key
    println("Test 11: maps.get() retrieves existing key")
    temp aliceAge int = maps.get(users, "alice")
    println("  Alice's age via get():", aliceAge)

    // Test 12: maps.keys() and maps.values()
    println("Test 12: maps.keys() and maps.values()")
    temp keys = maps.keys(users)
    temp values = maps.values(users)
    println("  Keys:", keys)
    println("  Values:", values)

    // Test 13: maps.delete()
    println("Test 13: maps.delete()")
    temp deleted bool = maps.delete(users, "dave")
    println("  Deleted dave:", deleted)
    println("  Map after delete:", users)

    // Test 14: maps.copy()
    println("Test 14: maps.copy()")
    temp usersCopy = maps.copy(users)
    println("  Copied map:", usersCopy)

    // Test 15: maps.is_empty()
    println("Test 15: maps.is_empty()")
    temp isEmpty bool = maps.is_empty(emptyMap)
    temp isNotEmpty bool = maps.is_empty(users)
    println("  Empty map is_empty:", isEmpty)
    println("  Users is_empty:", isNotEmpty)

    println("")
    println("=== All Map Tests Passed! ===")
}
